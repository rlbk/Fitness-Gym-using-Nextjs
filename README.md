# üèãÔ∏è‚Äç‚ôÇÔ∏è Fitness Gym App

A modern, full-featured fitness and gym management web application built with **Next.js 15**, **Supabase**, **Stripe**, and **Clerk**. This app allows fitness centers to manage users, subscriptions, and payments seamlessly while providing customers with a clean interface to manage their fitness plans.

---

## üöÄ Features

### üîê Secure Authentication

- User registration and login with **Clerk**
- Auth integration with **Supabase**
- Role-based access (Admin & Customer)

### üë§ User Dashboard

- View available subscription plans
- Subscribe via Stripe (monthly, quarterly, half-yearly, yearly)
- View active subscriptions
- Access subscription history

### üõ†Ô∏è Admin Dashboard

- Manage users and roles
- View and manage subscriptions
- Monitor payments and transaction history
- View revenue and user analytics

### üí≥ Payment & Subscriptions

- Fully integrated with **Stripe**
- Real-time subscription tracking
- Secure transaction history
- Flexible pricing options

---

## üß∞ Tech Stack

| Technology         | Purpose                                 |
| ------------------ | --------------------------------------- |
| **Next.js 15**     | Modern React framework for the frontend |
| **Server Actions** | Simplified backend API handling         |
| **Supabase**       | Scalable database & storage solution    |
| **Clerk**          | Authentication and user management      |
| **Tailwind CSS**   | Utility-first responsive styling        |
| **ShadCN**         | Customizable, accessible UI components  |
| **Zustand**        | Lightweight state management            |
| **Stripe**         | Payment and subscription integration    |

---

## üóÑÔ∏è Database Setup (Supabase)

### Tables

```sql
-- Plans Table
create table public.plans (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  name text null,
  description text null,
  features text[] null,
  monthly_price double precision null,
  quarterly_price double precision null,
  half_yearly_price double precision null,
  yearly_price double precision null,
  images text[] null,
  is_active boolean null,
  constraint plans_pkey primary key (id)
);

-- User Profiles Table
create table public.user_profiles (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  clerk_user_id text not null,
  name text null,
  email text not null,
  is_admin boolean null,
  is_active boolean null,
  is_customer boolean null default false,
  constraint user_profiles_pkey primary key (id),
  constraint user_profiles_clerk_user_id_key unique (clerk_user_id),
  constraint user_profiles_email_key unique (email)
);

-- Subscriptions Table
create table public.subscriptions (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  plan_id bigint null,
  user_id bigint null,
  start_date date null,
  end_date date null,
  total_duration bigint null,
  amount double precision null,
  payment_id text null,
  is_active boolean null,
  constraint subscriptions_pkey primary key (id),
  constraint subscriptions_plan_id_fkey foreign key (plan_id) references plans (id),
  constraint subscriptions_user_id_fkey foreign key (user_id) references user_profiles (id)
);
```

### Functions

```sql
-- User Reports Function
create or replace function users_reports () returns table (
  users_count bigint,
  customers_count bigint,
  admins_count bigint
) language sql as $$
select
  count(*) as users_count,
  count(*) filter(where is_customer = true) as customers_count,
  count(*) filter(where is_admin = true) as admins_count
from user_profiles;
$$;

-- Subscriptions Reports Function
create or replace function subscriptions_reports () returns table (
  subscriptions_count bigint,
  revenue bigint
) language sql as $$
SELECT
  COUNT(*) AS subscriptions_count,
  COALESCE(SUM(amount), 0) AS revenue
FROM subscriptions
WHERE is_active = true;
$$;

```

## üì¶ Setup Instructions

### 1. Clone the repository

```bash
git clone https://github.com/rlbk/Fitness-Gym-using-Nextjs.git
cd Fitness-Gym-using-Nextjs
```

### 3. Install dependencies

```bash
pnpm install
```

### 2.Environment Variables

Create a .env.local file and configure the following:

```bash
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=
NEXT_PUBLIC_CLERK_SIGN_IN_URL="/?form=sign-in&open=true"
NEXT_PUBLIC_CLERK_SIGN_UP_URL="/?form=sign-up&open=true"


SUPABASE_URL="https://xuxvfrimguxibheysohc.supabase.co"
SUPABASE_API_KEY=

NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=


```

### 4. Run the development server

```bash
pnpm dev
```
